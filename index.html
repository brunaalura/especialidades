<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Especialidades Escoteiras</title>
    <style>
        :root {
            --primary-color: #2E7D32;
            --secondary-color: #4CAF50;
            --light-color: #E8F5E9;
            --dark-color: #1B5E20;
            --accent-color: #FFC107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 8px 8px 0 0;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-title {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--dark-color);
        }
        
        .btn-danger {
            background-color: #f44336;
        }
        
        .btn-danger:hover {
            background-color: #d32f2f;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--light-color);
            color: var(--dark-color);
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        .patrol-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 20px;
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .patrol-1 { background-color: #E53935; } /* Vermelho */
        .patrol-2 { background-color: #3949AB; } /* Azul */
        .patrol-3 { background-color: #43A047; } /* Verde */
        .patrol-4 { background-color: #FB8C00; } /* Laranja */
        .patrol-5 { background-color: #8E24AA; } /* Roxo */
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 10px 0;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        .actions {
            display: flex;
            gap: 10px;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #777;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .actions {
                flex-direction: column;
            }
            
            th, td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistema de Especialidades Escoteiras</h1>
            <p class="subtitle">Controle e acompanhamento das especialidades conquistadas</p>
        </header>
        
        <div class="card">
            <h2 class="card-title">Cadastrar Escoteiro</h2>
            <form id="scoutForm">
                <div class="form-group">
                    <label for="scoutName">Nome do Escoteiro(a)</label>
                    <input type="text" id="scoutName" placeholder="Digite o nome completo" required>
                </div>
                
                <div class="form-group">
                    <label for="patrol">Patrulha</label>
                    <select id="patrol" required>
                        <option value="">Selecione uma patrulha</option>
                        <option value="1">Patrulha 1 (Vermelho)</option>
                        <option value="2">Patrulha 2 (Azul)</option>
                        <option value="3">Patrulha 3 (Verde)</option>
                        <option value="4">Patrulha 4 (Laranja)</option>
                        <option value="5">Patrulha 5 (Roxo)</option>
                    </select>
                </div>
                
                <button type="submit">Cadastrar Escoteiro</button>
            </form>
        </div>
        
        <div class="card">
            <h2 class="card-title">Registrar Especialidade</h2>
            <form id="specialtyForm">
                <div class="form-group">
                    <label for="scoutSelect">Escoteiro</label>
                    <select id="scoutSelect" required>
                        <option value="">Selecione um escoteiro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="specialtyName">Nome da Especialidade</label>
                    <input type="text" id="specialtyName" placeholder="Ex: Cozinheiro, Pioneiro, etc." required>
                </div>
                
                <button type="submit">Registrar Especialidade</button>
            </form>
        </div>
        
        <div class="card">
            <h2 class="card-title">Estat√≠sticas por Patrulha</h2>
            <div class="stats-grid" id="patrolStats">
                <!-- As estat√≠sticas ser√£o preenchidas via JavaScript -->
            </div>
        </div>
        
        <div class="card">
            <h2 class="card-title">Escoteiros Cadastrados</h2>
            <div id="scoutsList">
                <!-- A lista ser√° preenchida via JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Dados iniciais
        let scouts = JSON.parse(localStorage.getItem('scouts')) || [];
        let specialties = JSON.parse(localStorage.getItem('specialties')) || [];
        
        // Elementos do DOM
        const scoutForm = document.getElementById('scoutForm');
        const specialtyForm = document.getElementById('specialtyForm');
        const scoutSelect = document.getElementById('scoutSelect');
        const scoutsList = document.getElementById('scoutsList');
        const patrolStats = document.getElementById('patrolStats');
        
        // Fun√ß√£o para salvar dados no localStorage
        function saveData() {
            localStorage.setItem('scouts', JSON.stringify(scouts));
            localStorage.setItem('specialties', JSON.stringify(specialties));
        }
        
        // Fun√ß√£o para atualizar a lista de escoteiros no select
        function updateScoutSelect() {
            scoutSelect.innerHTML = '<option value="">Selecione um escoteiro</option>';
            
            scouts.forEach(scout => {
                const option = document.createElement('option');
                option.value = scout.id;
                option.textContent = scout.name;
                scoutSelect.appendChild(option);
            });
        }
        
        // Fun√ß√£o para calcular estat√≠sticas por patrulha
        function calculatePatrolStats() {
            const stats = {
                1: { name: "Patrulha 1", color: "Vermelho", count: 0, specialties: 0 },
                2: { name: "Patrulha 2", color: "Azul", count: 0, specialties: 0 },
                3: { name: "Patrulha 3", color: "Verde", count: 0, specialties: 0 },
                4: { name: "Patrulha 4", color: "Laranja", count: 0, specialties: 0 },
                5: { name: "Patrulha 5", color: "Roxo", count: 0, specialties: 0 }
            };
            
            // Contar escoteiros por patrulha
            scouts.forEach(scout => {
                if (stats[scout.patrol]) {
                    stats[scout.patrol].count++;
                }
            });
            
            // Contar especialidades por patrulha
            specialties.forEach(specialty => {
                const scout = scouts.find(s => s.id === specialty.scoutId);
                if (scout && stats[scout.patrol]) {
                    stats[scout.patrol].specialties++;
                }
            });
            
            return stats;
        }
        
        // Fun√ß√£o para renderizar estat√≠sticas
        function renderPatrolStats() {
            const stats = calculatePatrolStats();
            patrolStats.innerHTML = '';
            
            Object.values(stats).forEach(patrol => {
                const statCard = document.createElement('div');
                statCard.className = 'stat-card';
                
                const avg = patrol.count > 0 ? (patrol.specialties / patrol.count).toFixed(1) : '0';
                
                statCard.innerHTML = `
                    <h3>${patrol.name}</h3>
                    <div class="patrol-badge patrol-${patrol.name.split(' ')[1]}">${patrol.color}</div>
                    <div class="stat-value">${patrol.specialties}</div>
                    <div class="stat-label">Especialidades Conquistadas</div>
                    <div class="stat-value">${patrol.count}</div>
                    <div class="stat-label">Escoteiros</div>
                    <div class="stat-value">${avg}</div>
                    <div class="stat-label">M√©dia por Escoteiro</div>
                `;
                
                patrolStats.appendChild(statCard);
            });
        }
        
        // Fun√ß√£o para renderizar a lista de escoteiros
        function renderScoutsList() {
            if (scouts.length === 0) {
                scoutsList.innerHTML = `
                    <div class="empty-state">
                        <i>üë•</i>
                        <h3>Nenhum escoteiro cadastrado</h3>
                        <p>Adicione o primeiro escoteiro usando o formul√°rio acima.</p>
                    </div>
                `;
                return;
            }
            
            const table = document.createElement('table');
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Patrulha</th>
                        <th>Especialidades</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    ${scouts.map(scout => {
                        const scoutSpecialties = specialties.filter(s => s.scoutId === scout.id);
                        const patrolName = `Patrulha ${scout.patrol}`;
                        const patrolColorClass = `patrol-${scout.patrol}`;
                        
                        return `
                            <tr>
                                <td>${scout.name}</td>
                                <td><span class="patrol-badge ${patrolColorClass}">${patrolName}</span></td>
                                <td>${scoutSpecialties.length}</td>
                                <td class="actions">
                                    <button onclick="viewSpecialties(${scout.id})" class="btn-view">Ver</button>
                                    <button onclick="removeScout(${scout.id})" class="btn-danger">Remover</button>
                                </td>
                            </tr>
                        `;
                    }).join('')}
                </tbody>
            `;
            
            scoutsList.innerHTML = '';
            scoutsList.appendChild(table);
        }
        
        // Fun√ß√£o para visualizar especialidades de um escoteiro
        function viewSpecialties(scoutId) {
            const scout = scouts.find(s => s.id === scoutId);
            const scoutSpecialties = specialties.filter(s => s.scoutId === scoutId);
            
            if (scoutSpecialties.length === 0) {
                alert(`${scout.name} ainda n√£o possui especialidades registradas.`);
                return;
            }
            
            const specialtiesList = scoutSpecialties.map(s => `‚Ä¢ ${s.name}`).join('\n');
            alert(`Especialidades de ${scout.name}:\n\n${specialtiesList}`);
        }
        
        // Fun√ß√£o para remover um escoteiro
        function removeScout(scoutId) {
            if (confirm('Tem certeza que deseja remover este escoteiro? Todas as suas especialidades tamb√©m ser√£o removidas.')) {
                // Remover escoteiro
                scouts = scouts.filter(s => s.id !== scoutId);
                
                // Remover especialidades do escoteiro
                specialties = specialties.filter(s => s.scoutId !== scoutId);
                
                saveData();
                updateScoutSelect();
                renderScoutsList();
                renderPatrolStats();
            }
        }
        
        // Evento de envio do formul√°rio de escoteiro
        scoutForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('scoutName').value.trim();
            const patrol = document.getElementById('patrol').value;
            
            if (!name || !patrol) {
                alert('Por favor, preencha todos os campos.');
                return;
            }
            
            const newScout = {
                id: Date.now(), // ID simples baseado no timestamp
                name: name,
                patrol: parseInt(patrol)
            };
            
            scouts.push(newScout);
            saveData();
            
            // Limpar formul√°rio
            scoutForm.reset();
            
            // Atualizar interface
            updateScoutSelect();
            renderScoutsList();
            renderPatrolStats();
            
            alert('Escoteiro cadastrado com sucesso!');
        });
        
        // Evento de envio do formul√°rio de especialidade
        specialtyForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const scoutId = parseInt(scoutSelect.value);
            const specialtyName = document.getElementById('specialtyName').value.trim();
            
            if (!scoutId || !specialtyName) {
                alert('Por favor, preencha todos os campos.');
                return;
            }
            
            const newSpecialty = {
                id: Date.now(),
                scoutId: scoutId,
                name: specialtyName,
                date: new Date().toLocaleDateString('pt-BR')
            };
            
            specialties.push(newSpecialty);
            saveData();
            
            // Limpar formul√°rio
            specialtyForm.reset();
            
            // Atualizar interface
            renderScoutsList();
            renderPatrolStats();
            
            alert('Especialidade registrada com sucesso!');
        });
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            updateScoutSelect();
            renderScoutsList();
            renderPatrolStats();
        });
    </script>
</body>
</html>